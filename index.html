<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StudyHub ‚Äî Your Complete Study & Exam Prep Portal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    /* ========== THEME (CSS variables) ========== */
    :root{
      --bg:#0b0f1a; --surface:#0f1724; --card:#0c1220; --muted:#9aa4b2; --accent:#3b82f6;
      --text:#e6eef8; --heading:#ffffff; --code-bg:#0a0a0a; --code-text:#e6eef8; --border:rgba(255,255,255,0.06);
      --hl:#fde047; --link:var(--accent); --btn-text:#ffffff; --shadow:0 8px 24px rgba(0,0,0,.35);
      --img-filter:invert(0); --checkbox:#3b82f6; --danger:#ef4444; --ok:#22c55e; --warn:#f59e0b;
      --tr:.3s ease;
    }
    [data-theme="light"]{
      --bg:#ffffff; --surface:#f5f7fb; --card:#ffffff; --muted:#5b6b78; --accent:#2563eb;
      --text:#0b1220; --heading:#0b1220; --code-bg:#f2f4f8; --code-text:#0b1220; --border:rgba(0,0,0,0.08);
      --hl:#ffe58f; --link:#1d4ed8; --btn-text:#ffffff; --shadow:0 8px 24px rgba(0,0,0,.10);
      --img-filter:invert(0); --checkbox:#2563eb;
    }

    /* ========== BASE ========== */
    *, *::before, *::after{box-sizing:border-box}
    html, body{height:100%; margin:0}
    body{
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background:var(--bg); color:var(--text);
      transition: background var(--tr), color var(--tr);
    }
    a{color:var(--link); text-decoration:none}
    a:hover{text-decoration:underline}

    .layout{display:grid; grid-template-columns:260px 1fr; min-height:100vh}
    header{
      height:64px; display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:0 16px; background:linear-gradient(180deg, rgba(255,255,255,.03), transparent);
      border-bottom:1px solid var(--border); backdrop-filter: blur(6px);
      position:sticky; top:0; z-index:20;
    }
    .brand{display:flex; align-items:center; gap:10px}
    .brand h1{margin:0; font-size:18px; color:var(--heading)}
    .tag{font-size:12px; color:var(--muted)}

    nav{
      padding:16px; border-right:1px solid var(--border);
      background:linear-gradient(180deg, rgba(255,255,255,.02), transparent);
      position:sticky; top:64px; height:calc(100vh - 64px); overflow:auto;
    }
    .nav-link{padding:10px; border-radius:10px; color:var(--muted); cursor:pointer; display:flex; align-items:center; gap:8px}
    .nav-link[aria-current="page"]{background:linear-gradient(90deg, rgba(59,130,246,.12), rgba(59,130,246,.02)); color:var(--text)}

    main{padding:16px}
    .grid{display:grid; grid-template-columns:1fr 360px; gap:16px}
    .card{
      background:var(--card); border:1px solid var(--border); border-radius:12px; padding:14px; box-shadow:var(--shadow);
      transition: background var(--tr), color var(--tr), border-color var(--tr);
    }
    h2,h3{color:var(--heading); margin:0 0 8px}
    .muted{color:var(--muted)}

    .subjects-list{display:grid; gap:12px}
    .subject-card{padding:12px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,.015), transparent); border:1px solid var(--border)}

    .btn{background:var(--accent); color:var(--btn-text); padding:8px 12px; border:0; border-radius:10px; cursor:pointer}
    .ghost{background:transparent; color:var(--text); padding:8px 10px; border:1px solid var(--border); border-radius:10px; cursor:pointer}
    .danger{background:var(--danger)}

    .pyq-year{padding:8px; border-radius:8px; background:rgba(127,127,127,.08); display:inline-block; margin:6px 6px 0 0; border:1px solid var(--border)}

    .note{border-left:4px solid var(--accent); padding:10px; border-radius:6px; background:linear-gradient(90deg, rgba(59,130,246,.10), transparent)}
    .definition{border-left:4px solid #f97316; padding:10px; border-radius:6px; background:linear-gradient(90deg, rgba(249,115,22,.10), transparent)}

    pre.code{background:var(--code-bg); color:var(--code-text); padding:12px; border-radius:8px; overflow:auto; border:1px solid var(--border)}
    .code-wrapper{position:relative}
    .code-tools{position:absolute; top:6px; right:6px; display:flex; gap:6px}

    .checkbox{width:16px; height:16px; appearance:none; outline:none; border:2px solid var(--checkbox); border-radius:4px; display:inline-grid; place-content:center; cursor:pointer; vertical-align:middle}
    .checkbox:checked{background:var(--checkbox)}
    .checkbox:checked::after{content:"‚úì"; font-size:12px; color:white; line-height:1}

    .splash{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:9999; flex-direction:column; background:var(--bg); color:var(--text)}
    .splash .box{padding:24px 28px; border:1px dashed var(--border); border-radius:14px; text-align:center}

    .fade-all *{transition: color var(--tr), background var(--tr), border-color var(--tr), box-shadow var(--tr)}
    .go-top{position:fixed; right:16px; bottom:16px; width:44px; height:44px; border-radius:10px; background:var(--accent); color:#fff; display:grid; place-items:center; cursor:pointer; box-shadow:0 6px 20px rgba(37,99,235,.2)}
    #toast{position:fixed; right:16px; bottom:76px; background:var(--surface); color:var(--text); padding:12px; border-radius:10px; display:none; box-shadow:var(--shadow); border:1px solid var(--border)}

    input[type="text"], input[type="search"]{padding:8px 10px; border-radius:10px; border:1px solid var(--border); background:rgba(127,127,127,.08); color:var(--text); outline:none}

    /* Books grid */
    .books-grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:12px}
    .book-card{background:linear-gradient(180deg, rgba(255,255,255,.015), transparent); border:1px solid var(--border); border-radius:12px; padding:12px}
    .book-card img{width:100%; aspect-ratio: 3/2; object-fit:cover; border-radius:10px; border:1px solid var(--border); filter:var(--img-filter)}

    /* Mobile tweaks */
    .hamburger{display:none}
    @media (max-width: 1024px){ .grid{grid-template-columns:1fr} }
    @media (max-width: 900px){ .layout{grid-template-columns:1fr} nav{position:fixed; inset:64px 0 0 auto; width:260px; transform:translateX(-110%); transition:transform .25s ease; background:var(--surface); z-index:30}
      nav.open{transform:translateX(0)} .hamburger{display:inline-flex}
    }
    @media print{ nav, header, .go-top, .splash, #toast, .header-controls{display:none !important} body{background:#fff; color:#000} .card{border:0; box-shadow:none} }
  </style>
</head>
<body class="fade-all" data-theme="dark">
  <!-- Splash -->
  <div class="splash" id="splash" role="dialog" aria-label="Loading StudyHub">
    <div class="box">
      <h1 style="margin:0 0 6px">StudyHub</h1>
      <div class="tag">Your Complete Study & Exam Prep Portal</div>
      <div style="margin-top:10px" class="muted">Powered by: <strong>Sushil Panchal</strong></div>
      <div style="margin-top:12px" class="muted">Click anywhere to continue‚Ä¶</div>
    </div>
  </div>

  <div class="layout" id="app" hidden>
    <!-- Sidebar -->
    <nav id="sidebar" aria-label="Sidebar Navigation">
      <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:10px">
        <div class="brand">
          <h1>StudyHub</h1>
        </div>
      </div>
      <a class="nav-link" data-route="#home" href="#home">üè† Home</a>
      <a class="nav-link" data-route="#subjects" href="#subjects">üìö Subjects</a>
      <a class="nav-link" data-route="#pyqs" href="#pyqs">üìù PYQs</a>
      <a class="nav-link" data-route="#books" href="#books">üìñ Books</a>
      <a class="nav-link" data-route="#profile" href="#profile">üë§ Profile</a>
      <div style="flex:1; height:20px"></div>
      <div class="tag">StudyHub ‚Äî Powered by Sushil Panchal</div>
    </nav>

    <!-- Main column -->
    <div style="display:flex; flex-direction:column; min-height:100vh">
      <header>
        <div class="brand">
          <button class="ghost hamburger" id="hamburger" aria-label="Toggle navigation">‚ò∞</button>
          <h1>StudyHub</h1>
          <div class="tag" style="margin-left:8px">Your Complete Study & Exam Prep Portal</div>
        </div>
        <div class="header-controls" style="display:flex; gap:8px; align-items:center">
          <button class="ghost" id="themeToggle" title="Toggle theme">üåô</button>
          <button class="ghost" id="loginBtn">Login</button>
        </div>
      </header>

      <main>
        <!-- HOME -->
        <section id="home" data-view class="view">
          <div class="grid">
            <div>
              <div class="card">
                <h2>Welcome to StudyHub</h2>
                <p class="muted">All-in-one study portal. Click any subject to open full notes (login required).</p>
                <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap">
                  <button class="btn" id="downloadAllPdf">Download All Notes as PDF</button>
                  <button class="ghost" id="enterExam">Enable Exam Mode</button>
                </div>
              </div>

              <div style="height:12px"></div>

              <div class="card">
                <h3>Subjects</h3>
                <div class="subjects-list" id="subjectsCompact"></div>
              </div>
            </div>

            <aside>
              <div class="card">
                <h3>Quick PYQs</h3>
                <div id="homePyqs" style="margin-top:8px"></div>
              </div>

              <div style="height:12px"></div>

              <div class="card">
                <h3>Books Recents</h3>
                <div id="booksList" style="margin-top:8px"></div>
              </div>
            </aside>
          </div>
        </section>

        <!-- SUBJECTS -->
        <section id="subjects" data-view class="view" hidden>
          <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center; gap:8px; flex-wrap:wrap">
              <h2>Subjects & Notes</h2>
              <input id="subjectSearch" type="search" placeholder="Search subjects‚Ä¶">
            </div>
            <div id="subjectsList" style="margin-top:12px; display:grid; grid-template-columns:repeat(auto-fit, minmax(260px,1fr)); gap:12px"></div>
          </div>
        </section>

        <!-- PYQS -->
        <section id="pyqs" data-view class="view" hidden>
          <div class="card">
            <h2>Previous Year Questions (PYQs)</h2>
            <div id="pyqsMaster" style="margin-top:12px"></div>
          </div>
        </section>

        <!-- BOOKS -->
        <section id="books" data-view class="view" hidden>
          <div class="card">
            <h2>Books & Notes</h2>
            <p class="muted">All links open in a new tab. Replace the file names with your actual PDFs/images.</p>
            <div class="books-grid" id="booksGrid">
              <!-- Syllabus -->
              <div class="book-card">
                <img src="Syllabus.jpg" alt="Syllabus cover" />
                <h3>Syllabus</h3>
                <p>SPPU Official Syllabus</p>
                <div style="display:flex; gap:8px; flex-wrap:wrap">
                  <a href="SPPU_NEP_SYB.COM. (CA) Semester III_24062025.pdf" target="_blank" class="btn">Open PDF</a>
                </div>
              </div>

              <!-- DS -->
              <div class="book-card">
                <img src="11.jpg" alt="Data Structure Book" />
                <h3>Data Structure</h3>
                <p>Comprehensive notes on Data Structures in C.</p>
                <div style="display:flex; gap:8px; flex-wrap:wrap">
                  <a href="Data Structure.pdf" target="_blank" class="btn">Book</a>
                  <a href="data structure presentation.pdf" target="_blank" class="ghost">Notes</a>
                  <a href="data structure pyq.pdf" target="_blank" class="ghost">PYQs</a>
                </div>
              </div>

              <!-- Cyber -->
              <div class="book-card">
                <img src="22.jpg" alt="Cyber Security Book" />
                <h3>Introduction to Cyber Security</h3>
                <p>Basics and advanced concepts of Cyber Security.</p>
                <div style="display:flex; gap:8px; flex-wrap:wrap">
                  <a href="Introduction-cyber-security.pdf" target="_blank" class="btn">Book</a>
                  <a href="cybersecurity notes.pdf" target="_blank" class="ghost">Notes</a>
                  <a href="cyber security pyq.pdf" target="_blank" class="ghost">PYQs</a>
                </div>
              </div>

              <!-- PHP -->
              <div class="book-card">
                <img src="33.jpg" alt="Programming PHP Book" />
                <h3>Programming PHP</h3>
                <p>Learn PHP programming from fundamentals to advanced.</p>
                <div style="display:flex; gap:8px; flex-wrap:wrap">
                  <a href="Programming-PHP.pdf" target="_blank" class="btn">Book</a>
                  <a href="PHP Notes.pdf" target="_blank" class="ghost">Notes</a>
                  <a href="PHP PYQ's.pdf" target="_blank" class="ghost">PYQs</a>
                </div>
              </div>

              <!-- Extra -->
              <div class="book-card">
                <img src="https://dummyimage.com/600x400/1f2937/e5e7eb&text=Extra" alt="Extra" />
                <h3>Extra</h3>
                <div style="display:flex; gap:8px; flex-wrap:wrap">
                  <a href="html.pdf" target="_blank" class="ghost">HTML</a>
                  <a href="dbms.pdf" target="_blank" class="ghost">DBMS</a>
                  <a href="data-science.pdf" target="_blank" class="ghost">Data Science</a>
                  <a href="python.pdf" target="_blank" class="ghost">Python</a>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- PROFILE -->
        <section id="profile" data-view class="view" hidden>
          <div class="card">
            <h2>Profile</h2>
            <div id="profilePanel" style="margin-top:12px"></div>
          </div>
        </section>

        <!-- NOTES FULL VIEW -->
        <section id="notes" data-view class="view" hidden>
          <div class="card" id="notesCard">
            <div style="display:flex; justify-content:space-between; gap:8px; align-items:center; flex-wrap:wrap">
              <div>
                <h2 id="notesTitle">Subject Title</h2>
                <div class="muted" id="lastUpdated">Last Updated: --</div>
                <div class="muted" id="estimatedTime">Estimated Study Time: --</div>
              </div>
              <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap">
                <button class="ghost" id="examModeToggle">Enable Exam Mode</button>
                <button class="ghost" id="printBtn">Print / Save PDF</button>
                <a class="ghost" href="#subjects" id="backToSubjects">Back to Subjects</a>
              </div>
            </div>
            <hr style="margin:12px 0; border:0; border-top:1px solid var(--border)">
            <div style="display:flex; gap:16px; align-items:flex-start; flex-wrap:wrap">
              <div style="flex:1; min-width:280px">
                <div style="display:flex; justify-content:space-between; align-items:center; gap:8px; flex-wrap:wrap">
                  <div id="toc"></div>
                  <div style="display:flex; gap:8px; align-items:center">
                    <input id="notesSearch" type="search" placeholder="Search inside notes‚Ä¶">
                    <div id="searchNav" style="display:none; gap:6px; align-items:center">
                      <button class="ghost" id="prevMatch">‚óÄ</button>
                      <button class="ghost" id="nextMatch">‚ñ∂</button>
                    </div>
                  </div>
                </div>

                <div id="notesContent" style="margin-top:12px"></div>
              </div>

              <aside style="width:320px; max-width:100%">
                <div class="card">
                  <h3>Progress</h3>
                  <div id="progressSummary" style="margin-top:8px">Progress: 0% complete</div>
                  <div id="progressList" style="margin-top:8px"></div>
                </div>

                <div style="height:12px"></div>

                <div class="card">
                  <h3>PYQs for this subject</h3>
                  <div id="subjectPyqs" style="margin-top:8px"></div>
                </div>
              </aside>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <div class="go-top" id="goTopBtn" title="Go to top">‚¨Ü</div>
  <div id="toast" role="status" aria-live="polite"></div>

<script>
/* ====================== DATA ====================== */
const SUBJECTS = [
  {
    id:'ds', title:'Data Structures',
    summary:'Arrays, lists, stacks, queues, trees, graphs, hashing, sorting & searching.',
    estimated:'10 hours', lastUpdated: new Date().toLocaleDateString(),
    toc:[
      {id:'ds1',title:'Arrays & Linked Lists'},
      {id:'ds2',title:'Stacks & Queues'},
      {id:'ds3',title:'Trees & Binary Search Trees'},
      {id:'ds4',title:'Graphs & Traversals'},
      {id:'ds5',title:'Sorting & Searching Algorithms'}
    ],
    content:{
      ds1:`<h3 id="ds1">Arrays & Linked Lists</h3>
<p>Arrays give O(1) index access and strong locality, but insert/delete in middle is O(n). Linked lists use nodes with pointers; they provide O(1) insert/delete at known positions, but O(n) access by index.</p>
<div class="definition"><strong>Key points</strong><ul><li>Array: contiguous memory; index O(1); shifting cost O(n).</li><li>Linked list: dynamic size; insert/delete O(1) at head; search O(n).</li></ul></div>
<p><strong>Example (C): singly linked list insert at head</strong></p>
<pre class="code">/* C: simple singly linked list insert at head */
#include <stdio.h>
#include <stdlib.h>
struct Node{int data; struct Node *next;};
void push(struct Node** head_ref, int new_data){
  struct Node* new_node = (struct Node*)malloc(sizeof(struct Node));
  new_node->data = new_data; new_node->next = *head_ref; *head_ref = new_node;
}</pre>
<div class="note">Use arrays when random access dominates; use lists when frequent inserts/removals occur.</div>`,
      ds2:`<h3 id="ds2">Stacks & Queues</h3>
<p>Stacks (LIFO) support <em>push/pop</em>; queues (FIFO) support <em>enqueue/dequeue</em>. Uses: recursion, backtracking, expression parsing (stack); scheduling and BFS (queue).</p>
<pre class="code">#define MAX 100
int stack[MAX]; int top=-1;
void push(int x){ if(top<MAX-1) stack[++top]=x; }
int pop(){ return (top>=0)? stack[top--] : -1; }</pre>`,
      ds3:`<h3 id="ds3">Trees & Binary Search Trees</h3>
<p>BST keeps left <= node <= right. Average O(log n) search/insert/delete; worst O(n) if unbalanced. Balanced variants (AVL/RB) guarantee O(log n).</p>
<pre class="code">void inorder(struct Node* r){
  if(!r) return; inorder(r->left); printf("%d ", r->data); inorder(r->right);
}</pre>`,
      ds4:`<h3 id="ds4">Graphs & Traversals</h3>
<p>Adjacency list for sparse graphs; matrix for dense. BFS is O(V+E) and finds shortest path in unweighted graphs; DFS explores depth-first.</p>
<pre class="code">/* Pseudocode BFS */
visited[s]=true; queue q; q.push(s);
while(!q.empty()){ u=q.front(); q.pop();
  for(v in adj[u]) if(!visited[v]){ visited[v]=true; q.push(v); }
}</pre>`,
      ds5:`<h3 id="ds5">Sorting & Searching Algorithms</h3>
<p>Study QuickSort, MergeSort, HeapSort (O(n log n)); simple O(n¬≤) sorts; stability & space trade-offs; binary search O(log n).</p>
<pre class="code">int partition(int a[], int l, int h){
  int p=a[h], i=l-1;
  for(int j=l;j<h;j++) if(a[j]<=p){ ++i; int t=a[i]; a[i]=a[j]; a[j]=t; }
  int t=a[i+1]; a[i+1]=a[h]; a[h]=t; return i+1;
}</pre>`
    },
    pyqs:{
      2024:[
        'Explain BFS and DFS with examples and complexities.',
        'Implement QuickSort and analyze average vs worst cases.'
      ],
      2023:[
        'C program for singly linked list with insert/delete.',
        'Explain AVL rotations with sketches.'
      ],
      2022:[
        'Array vs Linked List ‚Äî differences and use-cases.',
        'Discuss Dijkstra algorithm and complexity.'
      ],
      2021:[
        'Hash tables: collisions and resolutions.',
        'QuickSort vs MergeSort comparison.'
      ],
      2020:[
        'Define stack and queue with applications.',
        'Write pseudocode for BFS and DFS.'
      ]
    }
  },
  {
    id:'php', title:'PHP',
    summary:'Server-side programming: syntax, forms, sessions, file handling, MySQL (PDO) & security.',
    estimated:'7 hours', lastUpdated:new Date().toLocaleDateString(),
    toc:[
      {id:'php1',title:'PHP Basics & Syntax'},
      {id:'php2',title:'Forms & Validation'},
      {id:'php3',title:'Sessions & Cookies'},
      {id:'php4',title:'File Handling & Uploads'},
      {id:'php5',title:'Database Connectivity (PDO/MySQL)'}
    ],
    content:{
      php1:`<h3 id="php1">PHP Basics & Syntax</h3>
<p>PHP runs server-side and mixes with HTML using <code>&lt;?php ?&gt;</code> tags. Variables start with <code>$</code>; arrays can be numeric or associative; functions are first-class.</p>
<pre class="code"><?php
$name = "Student";
echo "Hello, $name";
?></pre>`,
      php2:`<h3 id="php2">Forms & Validation</h3>
<p>Always validate on server. Use <code>filter_input</code> and encode outputs (<code>htmlspecialchars</code>) to prevent XSS.</p>
<pre class="code"><?php
if($_SERVER['REQUEST_METHOD']==='POST'){
  $email = filter_input(INPUT_POST,'email',FILTER_VALIDATE_EMAIL);
  $name  = filter_input(INPUT_POST,'name',FILTER_SANITIZE_STRING);
}
?></pre>`,
      php3:`<h3 id="php3">Sessions & Cookies</h3>
<p>Sessions keep state server-side (ID in cookie). Regenerate session IDs after login to prevent fixation.</p>
<pre class="code"><?php
session_start();
$_SESSION['user'] = 'sushil';
session_regenerate_id(true);
?></pre>`,
      php4:`<h3 id="php4">File Handling & Uploads</h3>
<p>Validate MIME type, size, and store with unique names. Never trust file extension only.</p>
<pre class="code"><?php
if(is_uploaded_file($_FILES['f']['tmp_name'])){
  $safe = bin2hex(random_bytes(8))."_".basename($_FILES['f']['name']);
  move_uploaded_file($_FILES['f']['tmp_name'], __DIR__."/uploads/".$safe);
}
?></pre>`,
      php5:`<h3 id="php5">Database Connectivity (PDO/MySQL)</h3>
<p>Use prepared statements to prevent SQL Injection.</p>
<pre class="code"><?php
$pdo = new PDO('mysql:host=localhost;dbname=studyhub','user','pass');
$stmt = $pdo->prepare('SELECT * FROM students WHERE id=?');
$stmt->execute([$id]); $rows=$stmt->fetchAll(PDO::FETCH_ASSOC);
?></pre>`
    },
    pyqs:{
      2024:['Secure file uploads in PHP.','Form validation using sessions ‚Äî explain flow.'],
      2023:['Prepared statements & SQLi prevention.','Session fixation & prevention methods.'],
      2022:['Cookies vs Sessions.','Build simple login using PHP & MySQL.'],
      2021:['CSRF and mitigations.','Unix file permissions for uploads.'],
      2020:['GET vs POST.','Sanitize input function in PHP.']
    }
  },
  {
    id:'cyber', title:'Cyber Security',
    summary:'CIA triad, cryptography, network security, web vulns (XSS/CSRF/SQLi), incident response.',
    estimated:'6 hours', lastUpdated:new Date().toLocaleDateString(),
    toc:[
      {id:'cy1',title:'Principles & CIA Triad'},
      {id:'cy2',title:'Cryptography Basics'},
      {id:'cy3',title:'Network Security'},
      {id:'cy4',title:'Web Security (XSS, CSRF, SQLi)'},
      {id:'cy5',title:'Incident Response & Forensics'}
    ],
    content:{
      cy1:`<h3 id="cy1">Principles & CIA Triad</h3>
<p>Confidentiality, Integrity, Availability. Map each to concrete controls.</p>
<ul><li>Confidentiality: encryption, access control.</li><li>Integrity: checksums, signatures.</li><li>Availability: redundancy, DDoS mitigation.</li></ul>`,
      cy2:`<h3 id="cy2">Cryptography Basics</h3>
<p>Symmetric (AES) for speed; asymmetric (RSA/ECC) for key exchange/signatures; hashing (SHA‚Äë2/3); HMAC for integrity+auth.</p>`,
      cy3:`<h3 id="cy3">Network Security</h3>
<p>Firewalls, IDS/IPS, VPN, segmentation, TLS. Understand ports and the TCP/IP stack.</p>`,
      cy4:`<h3 id="cy4">Web Security (XSS, CSRF, SQLi)</h3>
<p>Input validation, output encoding, CSRF tokens, prepared statements.</p>`,
      cy5:`<h3 id="cy5">Incident Response & Forensics</h3>
<p>Phases: prepare ‚Üí detect ‚Üí contain ‚Üí eradicate ‚Üí recover ‚Üí lessons learned. Maintain chain of custody.</p>`
    },
    pyqs:{
      2024:['CIA triad with real-world examples.','SQLi prevention measures.'],
      2023:['What is TLS and how it secures HTTP?','Symmetric vs asymmetric differences.'],
      2022:['Steps in incident response lifecycle.','What is XSS? Explain mitigations.'],
      2021:['Hashing and use-cases.','Benefits of network segmentation.'],
      2020:['Social engineering types.','Firewall types and placement.']
    }
  },
  {
    id:'web', title:'Web Development & WordPress',
    summary:'HTML/CSS/JS basics, responsive design, WordPress (themes, plugins, hooks), deployment.',
    estimated:'8 hours', lastUpdated:new Date().toLocaleDateString(),
    toc:[
      {id:'w1',title:'HTML & Semantics'},
      {id:'w2',title:'CSS & Responsive Design'},
      {id:'w3',title:'JavaScript Basics'},
      {id:'w4',title:'WordPress ‚Äî Themes & Plugins'},
      {id:'w5',title:'Deployment & Hosting'}
    ],
    content:{
      w1:`<h3 id="w1">HTML & Semantics</h3><p>Use semantic tags (&lt;header&gt;,&lt;article&gt;,&lt;nav&gt;) for accessibility/SEO.</p>`,
      w2:`<h3 id="w2">CSS & Responsive Design</h3><p>Fluid grids, media queries, Flexbox and Grid.</p>`,
      w3:`<h3 id="w3">JavaScript Basics</h3><p>DOM, events, fetch API, ES6+ features.</p>`,
      w4:`<h3 id="w4">WordPress ‚Äî Themes & Plugins</h3><p>Template hierarchy, hooks (actions/filters), child themes.</p>`,
      w5:`<h3 id="w5">Deployment & Hosting</h3><p>Shared vs VPS, SFTP, git-based deploys.</p>`
    },
    pyqs:{
      2024:['Responsive design principles.','Create a WordPress child theme.'],
      2023:['Explain CSS box model.','How does fetch API work?'],
      2022:['WordPress hooks ‚Äî explain with example.','Responsive navbar in CSS.'],
      2021:['Margin vs padding differences.','localStorage vs sessionStorage.'],
      2020:['HTML form + JS validation.','Importance of semantic HTML.']
    }
  },
  {
    id:'lab', title:'Lab Assignments & Projects',
    summary:'Practical builds: registration form, landing page, mini PHP‚ÄëMySQL app, git & deployment.',
    estimated:'6 hours', lastUpdated:new Date().toLocaleDateString(),
    toc:[
      {id:'l1',title:'Student Registration Project'},
      {id:'l2',title:'Event Landing Page'},
      {id:'l3',title:'Mini PHP‚ÄëMySQL APP'},
      {id:'l4',title:'Git & Deployment'},
      {id:'l5',title:'Project Report Tips'}
    ],
    content:{
      l1:`<h3 id="l1">Student Registration Project</h3><p>Validated form, MySQL schema, image upload, ER diagram.</p>`,
      l2:`<h3 id="l2">Event Landing Page</h3><p>Responsive layout with CTA and contact form (POST).</p>`,
      l3:`<h3 id="l3">Mini PHP‚ÄëMySQL APP</h3><p>CRUD with PDO prepared statements.</p>`,
      l4:`<h3 id="l4">Git & Deployment</h3><p>Branching workflow, FTP/SFTP, or static deploy.</p>`,
      l5:`<h3 id="l5">Project Report Tips</h3><p>Requirements, design, ERD, test cases, screenshots.</p>`
    },
    pyqs:{
      2024:['Build registration form with schema.','Design test cases for validation.'],
      2023:['College fest landing page.','Steps to deploy PHP app on shared host.'],
      2022:['ER diagram for online library.','SQL queries for reports.'],
      2021:['File upload handling in PHP.','Project documentation checklist.'],
      2020:['Login system in PHP.','Version control basics.']
    }
  },
  {
    id:'python', title:'Python Programming',
    summary:'Fundamentals, data types, control flow, functions, and basic libraries.',
    estimated:'9 hours', lastUpdated:new Date().toLocaleDateString(),
    toc:[
      {id:'py1',title:'Python Basics'},
      {id:'py2',title:'Data Structures in Python'},
      {id:'py3',title:'Functions & Modules'}
    ],
    content:{
      py1:`<h3 id="py1">Python Basics</h3>
<p>Introduction to Python syntax, variables, and operators.</p>
<pre class="code">print("Hello, Python!")
name = "World"
print(f"Hello, {name}!")</pre>`,
      py2:`<h3 id="py2">Data Structures in Python</h3>
<p>Lists, tuples, dictionaries, and sets.</p>
<pre class="code">my_list = [1, 2, 3]
my_dict = {"key": "value"}</pre>`,
      py3:`<h3 id="py3">Functions & Modules</h3>
<p>Defining and calling functions, importing modules.</p>
<pre class="code">def greet(name):
  return f"Hello, {name}"
print(greet("Alice"))</pre>`
    },
    pyqs:{
      2024:['Explain list comprehensions.','Write a function to reverse a string.'],
      2023:['Difference between tuple and list.','Implement a simple calculator.']
    }
  }
];

/* ====================== STATE ====================== */
const state = {
  user: JSON.parse(localStorage.getItem('studyhub_user')||'null'),
  theme: localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'dark'),
  view: 'home',
  currentSubject: null,
  examMode: localStorage.getItem('examMode')==='1'
};

document.body.setAttribute('data-theme', state.theme);

/* ====================== HELPERS ====================== */
const $ = (q,sc=document)=>sc.querySelector(q);
const $$ = (q,sc=document)=>Array.from(sc.querySelectorAll(q));
function showToast(msg){ const t=$('#toast'); t.textContent=msg; t.style.display='block'; setTimeout(()=>t.style.display='none',2500); }
function hideAll(){ $$('.view').forEach(v=>v.hidden=true); $$('nav .nav-link').forEach(n=>n.removeAttribute('aria-current')); }
function showView(id){ hideAll(); const el=$(`#${id}`); if(el){ el.hidden=false; const nav=$(`nav .nav-link[data-route="#${id}"]`); nav&&nav.setAttribute('aria-current','page'); state.view=id; if(window.innerWidth<900) $('#sidebar').classList.remove('open'); window.scrollTo({top:0,behavior:'smooth'}); } }

/* ====================== RENDERERS ====================== */
function renderSubjectsCompact(){ const el = $('#subjectsCompact'); el.innerHTML=''; SUBJECTS.forEach(s=>{ const d=document.createElement('div'); d.className='subject-card'; d.innerHTML = `<strong>${s.title}</strong><div class="muted" style="font-size:13px">${s.summary}</div><div style="margin-top:8px"><button class="ghost" data-open="${s.id}">Open Full Notes</button></div>`; el.appendChild(d); }); }
function renderSubjectsList(){ const el = $('#subjectsList'); el.innerHTML=''; SUBJECTS.forEach(s=>{ const c=document.createElement('div'); c.className='subject-card'; c.innerHTML = `<h3>${s.title}</h3><div class="muted">${s.summary}</div><div style="margin-top:8px"><button class="btn" data-open="${s.id}">Open Full Notes</button></div>`; el.appendChild(c); }); }
function renderHomePyqs(){ const out = $('#homePyqs'); out.innerHTML=''; SUBJECTS.forEach(s=>{ const box=document.createElement('div'); box.className='pyq-year'; const latest = Object.keys(s.pyqs||{}).sort((a,b)=>b-a)[0] || '‚Äî'; box.innerHTML = `<strong>${s.title}</strong><div class="muted" style="font-size:12px">Latest: ${latest}</div>`; out.appendChild(box); }); }
function renderBooks(){ const el=$('#booksList'); if(!el) return; el.innerHTML=''; const stored=JSON.parse(localStorage.getItem('studyhub_books')||'[]'); if(!stored.length){ el.innerHTML='<div class="muted">No local books yet. Add via code or backend later.</div>'; return; } stored.forEach(b=>{ const row=document.createElement('div'); row.style.display='flex'; row.style.gap='8px'; row.style.alignItems='center'; row.innerHTML=`<a href="${b.data}" download="${b.name}">${b.name}</a> <button class="ghost danger" data-del="${b.name}">Remove</button>`; el.appendChild(row); }); }
function renderProfile(){ const p=$('#profilePanel'); if(!p) return; p.innerHTML=''; if(state.user){ p.innerHTML=`<div>Hello, <strong>${state.user.name}</strong></div><div style="margin-top:8px"><button class="btn" id="logoutNow">Logout</button></div>`; } else { p.innerHTML=`<div class="muted">Not logged in</div><div style="margin-top:8px"><button class="btn" id="loginNow">Login</button></div>`; } }

/* ====================== NOTES & PROGRESS ====================== */
function openSubject(id){ const s=SUBJECTS.find(x=>x.id===id); if(!s) return; if(!state.user){ showToast('Login required to view full notes'); location.hash = '#profile'; return; } state.currentSubject=s; $('#notesTitle').textContent=s.title; $('#lastUpdated').textContent='Last Updated: '+s.lastUpdated; $('#estimatedTime').textContent='Estimated Study Time: '+s.estimated; buildTOC(s); buildNotes(s); buildProgress(s); buildSubjectPyqs(s); location.hash = '#notes'; }
function buildTOC(sub){ const t=$('#toc'); t.innerHTML='<strong>Index</strong><div style="margin-top:8px"></div>'; const list=document.createElement('div'); sub.toc.forEach(u=>{ const item=document.createElement('div'); item.innerHTML=`<label><input type="checkbox" class="checkbox unit-check" data-unit="${u.id}"> <a href="#${u.id}" data-jump="${u.id}">${u.title}</a></label>`; list.appendChild(item); }); t.appendChild(list); }
function buildNotes(sub){ const c=$('#notesContent'); c.innerHTML=''; for(const k of Object.keys(sub.content)){ c.insertAdjacentHTML('beforeend', sub.content[k]); } wrapCodeBlocks(); setupSearchWithin(); }
function buildProgress(sub){ const plist=$('#progressList'); plist.innerHTML=''; const saved=JSON.parse(localStorage.getItem('progress_'+sub.id)||'{}'); sub.toc.forEach(u=>{ const row=document.createElement('div'); row.innerHTML=`<label><input type="checkbox" class="checkbox unit-check" data-unit="${u.id}" ${saved[u.id]?'checked':''}> ${u.title}</label>`; plist.appendChild(row); }); updateProgress(sub); }
function updateProgress(sub){ const saved=JSON.parse(localStorage.getItem('progress_'+sub.id)||'{}'); const total=sub.toc.length; const done=Object.values(saved).filter(Boolean).length; $('#progressSummary').textContent=`Progress: ${Math.round(done/total*100)}% complete`; }
function buildSubjectPyqs(sub){ const p=$('#subjectPyqs'); p.innerHTML=''; for(const y of Object.keys(sub.pyqs).sort((a,b)=>b-a)){ const box=document.createElement('div'); box.className='card'; box.style.marginBottom='8px'; box.innerHTML=`<strong>${y}</strong><ol style="margin-top:8px">${sub.pyqs[y].map(q=>'<li>'+q+'</li>').join('')}</ol>`; p.appendChild(box); } }

/* ====================== CODE UTILITIES ====================== */
function wrapCodeBlocks(){ $$('#notesContent pre.code').forEach(pre=>{ if(pre.dataset.processed) return; pre.dataset.processed='1'; const wrap=document.createElement('div'); wrap.className='code-wrapper'; const tools=document.createElement('div'); tools.className='code-tools'; const copy=document.createElement('button'); copy.className='ghost'; copy.textContent='Copy'; const tog=document.createElement('button'); tog.className='ghost'; tog.textContent='Hide'; copy.onclick=()=>{ navigator.clipboard.writeText(pre.textContent).then(()=>showToast('Code copied')); }; let collapsed=false; tog.onclick=()=>{ collapsed=!collapsed; pre.style.display=collapsed?'none':'block'; tog.textContent=collapsed?'Show':'Hide'; }; pre.parentNode.insertBefore(wrap,pre); wrap.appendChild(pre); tools.appendChild(copy); tools.appendChild(tog); wrap.appendChild(tools); }); }

/* ====================== SEARCH INSIDE NOTES ====================== */
let matches=[], cur=0;
function setupSearchWithin(){ const input=$('#notesSearch'); const content=$('#notesContent'); if(!input||!content) return; input.value=''; matches=[]; const nav=$('#searchNav'); nav.style.display='none'; input.oninput=()=>{ clearHighlights(); const q=input.value.trim(); if(!q){ nav.style.display='none'; matches=[]; return; } const re=new RegExp(q.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'),'gi'); highlight(content,re); matches = $$('.search-highlight'); if(matches.length){ nav.style.display='flex'; cur=0; jump(0); } else { nav.style.display='none'; } }; $('#nextMatch').onclick=()=>{ if(!matches.length) return; cur=(cur+1)%matches.length; jump(cur); }; $('#prevMatch').onclick=()=>{ if(!matches.length) return; cur=(cur-1+matches.length)%matches.length; jump(cur); }; input.onkeydown=(e)=>{ if(e.key==='Enter' && matches.length) jump(0); }; }
function jump(i){ matches.forEach(m=>m.style.outline='none'); const el=matches[i]; if(!el) return; el.style.outline='3px solid rgba(59,130,246,.5)'; el.scrollIntoView({behavior:'smooth', block:'center'}); }
function clearHighlights(){ $$('.search-highlight').forEach(n=>{ n.outerHTML = n.innerHTML; }); }
function highlight(node,re){ const tw=document.createTreeWalker(node, NodeFilter.SHOW_TEXT); const texts=[]; while(tw.nextNode()) texts.push(tw.currentNode); texts.forEach(tn=>{ const p=tn.parentNode; if(!p || p.nodeName==='SCRIPT') return; if(re.test(tn.nodeValue)){ const span=document.createElement('span'); span.innerHTML = tn.nodeValue.replace(re, m=>`<span class="search-highlight" style="background:var(--hl); color:#111; padding:0 .15em">${m}</span>`); p.replaceChild(span, tn); } }); }

/* ====================== AUTH ====================== */
function initAuth(){ $('#loginBtn').addEventListener('click', ()=>{ if(state.user){ state.user=null; localStorage.removeItem('studyhub_user'); renderProfile(); showToast('Logged out'); return; } const name=prompt('Enter your name'); if(name){ state.user={name}; localStorage.setItem('studyhub_user', JSON.stringify(state.user)); renderProfile(); showToast('Logged in as '+name); } }); document.addEventListener('click', (e)=>{ if(e.target.id==='loginNow'){ $('#loginBtn').click(); } if(e.target.id==='logoutNow'){ $('#loginBtn').click(); } }); }

/* ====================== EVENTS ====================== */
function initNav(){
  // Hash-based routing
  function applyRoute(){ const hash=(location.hash||'#home'); const id=hash.replace('#',''); const exists=$(`[data-view]#${id}`); showView(exists? id : 'home'); }
  window.addEventListener('hashchange', applyRoute);
  applyRoute();

  // Open subject buttons
  document.addEventListener('click', (e)=>{
    const btn=e.target.closest('[data-open]'); if(btn){ openSubject(btn.dataset.open); }
  });

  // Subject search filter
  $('#subjectSearch')?.addEventListener('input', (e)=>{
    const q=e.target.value.toLowerCase(); const cont=$('#subjectsList');
    cont?.querySelectorAll('.subject-card').forEach(card=>{ const txt=card.textContent.toLowerCase(); card.style.display = txt.includes(q)?'block':'none'; });
  });

  // Books local remove (from localStorage list only)
  document.addEventListener('click', (e)=>{
    const del=e.target.getAttribute && e.target.getAttribute('data-del'); if(!del) return; let stored=JSON.parse(localStorage.getItem('studyhub_books')||'[]'); stored=stored.filter(x=>x.name!==del); localStorage.setItem('studyhub_books', JSON.stringify(stored)); renderBooks(); showToast('Removed '+del); });

  // Print & exam
  document.addEventListener('click', (e)=>{ if(e.target.id==='printBtn') window.print(); });
  $('#enterExam')?.addEventListener('click', ()=>{ $('#examModeToggle').click(); });

  // Hamburger
  $('#hamburger')?.addEventListener('click', ()=> $('#sidebar').classList.toggle('open'));
}

/* ====================== THEME TOGGLE ====================== */
function setTheme(next){ state.theme=next; document.body.setAttribute('data-theme', next); localStorage.setItem('theme', next); const icon = (next==='light') ? '‚òÄÔ∏è' : 'üåô'; $('#themeToggle').textContent = icon; showToast('Theme: '+next); }
$('#themeToggle').addEventListener('click', ()=>{ setTheme(state.theme==='light' ? 'dark' : 'light'); });

/* ====================== EXAM MODE ====================== */
$('#examModeToggle').addEventListener('click', ()=>{ state.examMode=!state.examMode; localStorage.setItem('examMode', state.examMode?'1':'0'); $('#examModeToggle').textContent = state.examMode ? 'Disable Exam Mode' : 'Enable Exam Mode'; $$('.definition,.note').forEach(el=> el.style.display = state.examMode ? 'none' : 'block'); showToast(state.examMode ? '‚úÖ Exam Mode Enabled' : 'üìñ Exam Mode Disabled'); });

/* ====================== SPLASH, TOP, KEYS ====================== */
function hideSplash(){ const sp=$('#splash'); sp.style.transition='opacity .35s'; sp.style.opacity='0'; setTimeout(()=>{ sp.style.display='none'; $('#app').hidden=false; }, 380); }
$('#splash').addEventListener('click', hideSplash); setTimeout(hideSplash, 1800);
$('#goTopBtn').addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));
document.addEventListener('keydown',(e)=>{ if(document.activeElement && ['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) return; if(e.key==='D' || e.key==='d') $('#themeToggle').click(); if(e.key==='T' || e.key==='t') window.scrollTo({top:0,behavior:'smooth'}); if(e.key==='P' || e.key==='p') $('#printBtn')?.click(); if(e.key==='H' || e.key==='h') location.hash='#home'; if(e.key==='N' || e.key==='n') location.hash='#notes'; if(e.key==='Q' || e.key==='q') location.hash='#pyqs'; if(e.key==='?') alert('Shortcuts:\nD=Toggle Theme, T=Top, P=Print, H=Home, N=Notes, Q=PYQs'); });

/* ====================== INIT ====================== */
(function init(){ setTheme(state.theme); renderSubjectsCompact(); renderSubjectsList(); renderHomePyqs(); renderBooks(); renderProfile(); buildPyqMaster(); initAuth(); initNav(); })();
function buildPyqMaster(){ const p=$('#pyqsMaster'); p.innerHTML=''; SUBJECTS.forEach(s=>{ const outer=document.createElement('div'); outer.className='card'; outer.style.marginBottom='8px'; outer.innerHTML=`<h3>${s.title}</h3>`; for(const y of Object.keys(s.pyqs).sort((a,b)=>b-a)){ const box=document.createElement('div'); box.className='pyq-year'; box.innerHTML=`<strong>${y}</strong><ol>${s.pyqs[y].map(q=>'<li>'+q+'</li>').join('')}</ol>`; outer.appendChild(box); } p.appendChild(outer); }); }
</script>
</body>
</html>
